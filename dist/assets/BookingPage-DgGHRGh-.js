import{c as O,b as z,u as Y,r as c,j as e,B as le,L as W,O as oe,C as ce,S as de,P as me,e as pe,V as T}from"./index-CAm8ThRU.js";import{u as xe,P as ue}from"./PhoneInput-d9hozOxK.js";import{S as ge}from"./SEOHead-D0m3rQ6u.js";import{g as b,i as J,F as he}from"./supabase-CczRhaG5.js";import{u as be,a as ye,C as R}from"./stripe.esm-DvvTbaBv.js";import{C as L}from"./credit-card-FGMs7f0t.js";import{C as j}from"./check-circle-rt7PIa3k.js";import{S as fe,s as je}from"./StripeProvider-BPN1V0zv.js";import{C as Ne}from"./calendar-CEuwKNwK.js";import{U as ke}from"./users-DCZBdpxU.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=O("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=O("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=O("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=O("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]),G=[{id:b(),name:"Bavaria 34"},{id:b(),name:"Beneteau First 36.7"},{id:b(),name:"J/109"}],Ce={},f={},K={async createBooking(t){try{console.log("Creating booking with data:",t);const s=t.participants*199,a=t.paymentMethod==="deposit"?t.depositAmount||Math.round(s*.3):s,r=b(),l={id:r,name:`${t.firstName} ${t.lastName}`,email:t.email,phone:t.phone,language:"en",segment:"new",total_bookings:1,total_spent:s,lead_source:"website",portal_access:!0,portal_token:b(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()};Ce[r]=l;const n=await this.getAvailableYacht(t.bookingDate),d=b(),i={id:d,client_id:r,yacht_id:n==null?void 0:n.id,session_date:t.bookingDate,session_time:t.timeSlot,status:t.paymentMethod==="card"?"confirmed":"pending",payment_status:t.paymentMethod==="card"?"paid":"pending",amount:s,notes:t.specialRequests,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),client:l,yacht:n};return f[d]=i,z.success("Booking created successfully! Check your email for confirmation."),i}catch(s){return console.error("Error in createBooking:",s),z.error("An unexpected error occurred. Please try again."),null}},async getAvailableYacht(t){return await new Promise(s=>setTimeout(s,300)),G[Math.floor(Math.random()*G.length)]},async updateYachtStatus(t,s,a){console.log(`Yacht ${t} status updated to ${s}`),a&&console.log(`Next booking set to ${a}`)},async getBookingWithDetails(t){return await new Promise(s=>setTimeout(s,300)),f[t]||null},async updateBookingStatus(t,s){return f[t]?(f[t].status=s,f[t].updated_at=new Date().toISOString(),!0):!1},async updatePaymentStatus(t,s){return f[t]?(f[t].payment_status=s,f[t].updated_at=new Date().toISOString(),!0):!1},validateBookingForm(t){const s=[];t.firstName.trim()||s.push("First name is required"),t.lastName.trim()||s.push("Last name is required"),t.email.trim()||s.push("Email is required"),t.phone.trim()||s.push("Phone number is required"),t.bookingDate||s.push("Booking date is required"),t.timeSlot||s.push("Time slot is required"),(t.participants<1||t.participants>8)&&s.push("Participants must be between 1 and 8"),t.agreeTerms||s.push("You must agree to the terms and conditions");const a=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;t.email&&!a.test(t.email)&&s.push("Please enter a valid email address"),t.phone||s.push("Phone number is required"),t.paymentMethod==="card"&&!t.paymentSucceeded&&s.push("Payment must be completed");const r=new Date(t.bookingDate),l=new Date;return new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),0,0,0,0)),new Date(Date.UTC(l.getFullYear(),l.getMonth(),l.getDate(),0,0,0,0)),r<l&&s.push("Booking date must be in the future"),s}},w={},Pe={},_e={async createOrUpdateClient(t){try{await new Promise(a=>setTimeout(a,300));const s=Object.values(w).find(a=>a.email===t.email);if(s){const a={...s,name:`${t.firstName} ${t.lastName}`,phone:t.phone,language:t.language||"en",lead_source:t.leadSource||"website",updated_at:new Date().toISOString()};return w[s.id]=a,a}else{const a=b(),r=this.generatePortalToken(),l={id:a,name:`${t.firstName} ${t.lastName}`,email:t.email,phone:t.phone,language:t.language||"en",segment:"new",total_bookings:0,total_spent:0,lead_source:t.leadSource||"website",portal_access:!0,portal_token:r,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return w[a]=l,l}}catch(s){return console.error("CRM client creation/update failed:",s),null}},async createBooking(t){try{await new Promise(r=>setTimeout(r,500));const s=b(),a={id:s,client_id:t.clientId,yacht_id:t.yachtId,session_date:t.sessionDate,session_time:t.sessionTime,status:"pending",payment_status:"pending",amount:t.amount,notes:t.specialRequests,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return Pe[s]=a,await this.updateClientStats(t.clientId,t.amount),a}catch(s){return console.error("CRM booking creation failed:",s),null}},async generateClientPortalAccess(t){try{await new Promise(n=>setTimeout(n,200));const s=w[t];if(!s)return null;const a=s.portal_token||this.generatePortalToken();(!s.portal_access||!s.portal_token)&&(s.portal_access=!0,s.portal_token=a,w[t]=s);const r=new Date;r.setDate(r.getDate()+30);const l=`${he}/portal?token=${a}`;return{token:a,url:l,expiresAt:r}}catch(s){return console.error("Failed to generate client portal access:",s),null}},async updateClientStats(t,s){try{const a=w[t];if(!a)return;const r=(a.total_bookings||0)+1,l=(a.total_spent||0)+s;let n=a.segment||"new";r>=5||l>=1e3?n="vip":r>=2&&(n="active"),w[t]={...a,total_bookings:r,total_spent:l,last_booking:new Date().toISOString(),segment:n,updated_at:new Date().toISOString()}}catch(a){console.error("Failed to update client stats:",a)}},generatePortalToken(){return b()},validateClientData(t){const s=[];return(!t.firstName||t.firstName.trim()==="")&&s.push("First name is required"),(!t.lastName||t.lastName.trim()==="")&&s.push("Last name is required"),!t.email||t.email.trim()===""?s.push("Email is required"):/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.email)||s.push("Email format is invalid"),(!t.phone||t.phone.trim()==="")&&s.push("Phone number is required"),s},validateBookingData(t){const s=[];if(t.clientId?J(t.clientId)||s.push("Client ID must be a valid UUID"):s.push("Client ID is required"),t.yachtId&&!J(t.yachtId)&&s.push("Yacht ID must be a valid UUID"),!t.sessionDate)s.push("Session date is required");else{const a=new Date(t.sessionDate),r=new Date,l=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate())),n=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate()));l<n&&s.push("Session date cannot be in the past")}return t.sessionTime||s.push("Session time is required"),(t.participants<1||t.participants>8)&&s.push("Participants must be between 1 and 8"),t.amount<=0&&s.push("Amount must be greater than zero"),s}},Ie={style:{base:{color:"#32325d",fontFamily:'"Inter", sans-serif',fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"#aab7c4"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}},hidePostalCode:!0},De=({clientSecret:t,amount:s,currency:a="EUR",onSuccess:r,onError:l})=>{const{t:n}=Y(),d=be(),i=ye(),[v,u]=c.useState(null),[S,m]=c.useState(!1),[C,$]=c.useState(!1),[P,B]=c.useState(!1),[q,_]=c.useState("");c.useEffect(()=>{},[d]);const U=async p=>{var I;if(p.preventDefault(),!(!d||!i)){if(v){(I=i.getElement(R))==null||I.focus();return}if(!S){u(n("payment.incompleteCard","Please complete your card details"));return}if(!q){u(n("payment.nameRequired","Cardholder name is required"));return}$(!0);try{const g=await d.confirmCardPayment(t,{payment_method:{card:i.getElement(R),billing_details:{name:q}}});g.error?(u(g.error.message||"An error occurred with your payment"),l==null||l(new Error(g.error.message||"Payment failed"))):(u(null),B(!0),r==null||r(g.paymentIntent))}catch(g){u("An unexpected error occurred"),l==null||l(g)}finally{$(!1)}}},F=(p,I)=>new Intl.NumberFormat("en-US",{style:"currency",currency:I.toUpperCase()}).format(p);return e.jsxs("form",{onSubmit:U,className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg mb-6",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(L,{className:"h-6 w-6 text-blue-600 flex-shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:n("booking.secureProcessing")}),e.jsx("p",{className:"text-blue-800 text-sm",children:n("booking.secureProcessingDescription")})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"cardholderName",className:"block text-sm font-semibold text-gray-900 mb-2",children:n("booking.cardholderName")}),e.jsx("input",{id:"cardholderName",type:"text",value:q,onChange:p=>_(p.target.value),placeholder:"John Doe",required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:C||P})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"card-element",className:"block text-sm font-semibold text-gray-900 mb-2",children:n("booking.cardNumber")}),e.jsx("div",{className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus-within:ring-2 focus-within:ring-primary-500 focus-within:border-transparent bg-white",children:e.jsx(R,{id:"card-element",options:Ie,onChange:p=>{u(p.error?p.error.message:""),m(p.complete)}})})]})]}),v&&e.jsx("div",{className:"bg-red-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Z,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-red-800 text-sm",children:v})]})}),P&&e.jsx("div",{className:"bg-green-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(j,{className:"h-5 w-5 text-green-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-green-800 text-sm",children:n("payment.success","Payment successful!")})]})}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"text-gray-700",children:[e.jsxs("span",{className:"text-sm",children:[n("booking.total"),":"]}),e.jsx("span",{className:"ml-2 font-semibold text-lg",children:F(s,a)})]}),e.jsx(le,{type:"submit",variant:"primary",size:"lg",disabled:C||P||!d||!S,loading:C,children:C?n("booking.processing"):P?n("payment.paid","Paid"):n("payment.pay","Pay")+" "+F(s,a)})]})]})},Te=({onSelect:t,selectedMethod:s="card"})=>{const{t:a}=Y(),[r,l]=c.useState(s),n=[{id:"card",name:a("payment.creditCard","Credit Card"),icon:e.jsx(L,{className:"h-5 w-5"}),description:a("payment.creditCardDesc","Pay securely with your credit or debit card")},{id:"deposit",name:a("payment.deposit","Pay Deposit"),icon:e.jsx(we,{className:"h-5 w-5"}),description:a("payment.depositDesc","Pay 30% now and the rest on the day")},{id:"wallet",name:a("payment.wallet","Digital Wallet"),icon:e.jsx(Se,{className:"h-5 w-5"}),description:a("payment.walletDesc","Pay with Apple Pay or Google Pay")}],d=i=>{l(i),t(i)};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:a("payment.selectMethod","Select Payment Method")}),e.jsx("div",{className:"space-y-3",children:n.map(i=>e.jsxs("div",{className:`flex items-start p-4 border-2 rounded-lg cursor-pointer transition-colors duration-200 ${r===i.id?"border-primary-600 bg-primary-50":"border-gray-200 hover:border-primary-300 hover:bg-gray-50"}`,onClick:()=>d(i.id),children:[e.jsx("div",{className:"flex items-center h-5",children:e.jsx("input",{id:`payment-${i.id}`,name:"payment-method",type:"radio",checked:r===i.id,onChange:()=>d(i.id),className:"h-4 w-4 text-primary-600 border-gray-300 focus:ring-primary-500"})}),e.jsxs("div",{className:"ml-3 flex items-center",children:[e.jsx("div",{className:`p-2 rounded-full mr-3 ${r===i.id?"bg-primary-100":"bg-gray-100"}`,children:i.icon}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:`payment-${i.id}`,className:"font-medium text-gray-900",children:i.name}),e.jsx("p",{className:"text-sm text-gray-500",children:i.description})]})]})]},i.id))})]})},Ye=()=>{const{t}=Y(),[s,a]=c.useState(1),[r,l]=c.useState(""),[n,d]=c.useState(""),[i,v]=c.useState(1),[u,S]=c.useState(!1),[m,C]=c.useState("card"),[$,P]=c.useState(!1),[B,q]=c.useState(null),[_,U]=c.useState(null),[F,p]=c.useState(!1),[I,g]=c.useState(!1),{register:D,handleSubmit:Q,watch:X,control:ee,formState:{errors:h}}=xe({defaultValues:{participants:1,agreeTerms:!1,agreeMarketing:!1}}),M=X(),te=[{time:"08:30",available:!0,price:199},{time:"09:00",available:!0,price:199},{time:"13:30",available:!1,price:199},{time:"14:00",available:!0,price:199}],N=i*199,y=Math.round(N*.3);c.useEffect(()=>{(async()=>{if(s===3&&!_&&m==="card")try{p(!0);const x=m==="deposit"?y:N,{clientSecret:A}=await je.createPaymentIntent({amount:x,currency:"eur",description:`Booking for ${r} at ${n} - ${i} participants`,metadata:{bookingDate:r,timeSlot:n,participants:i.toString()}});U(A)}catch(x){console.error("Error creating payment intent:",x),T.error(t("payment.intentError","Failed to initialize payment. Please try again."))}finally{p(!1)}})()},[s,_,m,y,N,r,n,i,t]);const se=()=>{s<3&&a(s+1)},ae=()=>{s>1&&a(s-1)},E=()=>{switch(s){case 1:return r&&n&&i>0;case 2:return M.firstName&&M.lastName&&M.email&&M.phone&&M.agreeTerms;case 3:return I||m==="deposit";default:return!0}},re=o=>{g(!0),T.success(t("payment.success","Payment successful!"))},ne=o=>{T.error(o.message||t("payment.error","Payment failed. Please try again."))},ie=async o=>{var H;S(!0);const x={...o,bookingDate:r,timeSlot:n,participants:i};x.paymentMethod=m,x.depositAmount=y;const A=K.validateBookingForm(x);if(A.length>0){A.forEach(k=>T.error(k)),S(!1);return}try{const k=await K.createBooking(x);if(k){if(T.success(t("booking.success")),(H=k.client)!=null&&H.id){const V=await _e.generateClientPortalAccess(k.client.id);V&&q(V.url)}P(!0)}}catch(k){console.error("Booking error:",k),T.error(t("booking.error"))}finally{S(!1)}};return $?e.jsx("div",{className:"pt-20 min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(j,{className:"h-8 w-8 text-green-600"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:t("booking.success")}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Check your email for booking confirmation and details."}),B&&e.jsx("a",{href:B,target:"_blank",rel:"noopener norefferer",className:"block w-full bg-primary-600 text-white py-3 rounded-lg font-semibold hover:bg-primary-700 transition-colors duration-300 mb-4",children:"Access Your Client Portal"}),e.jsx(W,{to:"/",className:"text-primary-600 hover:text-primary-700 font-medium",children:"Return to Home"})]})}):e.jsxs("div",{className:"pt-20 min-h-screen bg-gray-50",children:[e.jsx(oe,{position:"top-right"}),e.jsx(ge,{title:t("booking.title"),description:t("booking.subtitle"),url:"/booking"}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-4 font-serif",children:t("booking.title")}),e.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:t("booking.subtitle")})]}),e.jsx("div",{className:"max-w-3xl mx-auto mb-12",children:e.jsx("div",{className:"flex items-center justify-between",children:[{step:1,title:t("booking.steps.dateTime"),icon:Ne},{step:2,title:t("booking.steps.details"),icon:ke},{step:3,title:t("booking.steps.payment"),icon:L}].map((o,x)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`flex items-center justify-center w-12 h-12 rounded-full border-2 transition-colors duration-300 ${s>=o.step?"bg-primary-600 border-primary-600 text-white":"border-gray-300 text-gray-400"}`,children:s>o.step?e.jsx(j,{className:"h-6 w-6"}):e.jsx(o.icon,{className:"h-6 w-6"})}),e.jsxs("div",{className:"ml-4 hidden sm:block",children:[e.jsxs("p",{className:`font-semibold ${s>=o.step?"text-primary-600":"text-gray-400"}`,children:[t("common.step")," ",o.step]}),e.jsx("p",{className:`text-sm ${s>=o.step?"text-gray-900":"text-gray-500"}`,children:o.title})]}),x<2&&e.jsx("div",{className:`hidden sm:block w-24 h-1 mx-4 rounded ${s>o.step?"bg-primary-600":"bg-gray-300"}`})]},o.step))})}),e.jsx("form",{onSubmit:Q(ie),children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8",children:[s===1&&e.jsxs("div",{className:"space-y-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:t("booking.selectExperience")}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-lg font-semibold text-gray-900 mb-4",children:t("booking.chooseDate")}),e.jsx("input",{type:"date",value:r,onChange:o=>l(o.target.value),min:new Date().toISOString().split("T")[0],className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent text-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-lg font-semibold text-gray-900 mb-4",children:t("booking.chooseTime")}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:te.map(o=>e.jsxs("button",{type:"button",onClick:()=>o.available&&d(o.time),disabled:!o.available,className:`p-4 rounded-lg border-2 transition-all duration-300 ${n===o.time?"border-primary-600 bg-primary-50 text-primary-600":o.available?"border-gray-300 hover:border-primary-300 hover:bg-primary-50":"border-gray-200 bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:[e.jsx("div",{className:"text-xl font-semibold",children:o.time}),e.jsx("div",{className:"text-sm",children:o.available?`€${o.price} ${t("booking.pricePerPerson")}`:t("booking.fullyBooked")})]},o.time))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-lg font-semibold text-gray-900 mb-4",children:t("booking.participants")}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{type:"button",onClick:()=>v(Math.max(1,i-1)),className:"w-12 h-12 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors duration-300 flex items-center justify-center text-xl font-semibold",children:"-"}),e.jsx("span",{className:"text-2xl font-bold text-gray-900 min-w-[3rem] text-center",children:i}),e.jsx("button",{type:"button",onClick:()=>v(Math.min(8,i+1)),className:"w-12 h-12 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors duration-300 flex items-center justify-center text-xl font-semibold",children:"+"}),e.jsx("span",{className:"text-gray-600 ml-4",children:t("booking.maxParticipants")})]})]})]}),s===2&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:t("booking.yourDetails")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:[t("booking.firstName")," *"]}),e.jsx("input",{type:"text",...D("firstName",{required:t("forms.required")}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"}),h.firstName&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.firstName.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:[t("booking.lastName")," *"]}),e.jsx("input",{type:"text",...D("lastName",{required:t("forms.required")}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"}),h.lastName&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.lastName.message})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:[t("booking.email")," *"]}),e.jsx("input",{type:"email",...D("email",{required:t("forms.required"),pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:t("forms.invalidEmail")}}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"}),h.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.email.message})]}),e.jsx("div",{children:e.jsx(ue,{name:"phone",control:ee,label:t("booking.phone"),error:h.phone,required:!0})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:t("booking.specialRequests")}),e.jsx("textarea",{...D("specialRequests"),rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:t("booking.specialRequestsPlaceholder")})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("input",{type:"checkbox",...D("agreeTerms",{required:t("booking.agreeTermsRequired")}),className:"mt-1 h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),e.jsxs("label",{className:"text-sm text-gray-700",children:[t("booking.agreeTerms")," ",e.jsx(W,{to:"/terms-of-service",className:"text-primary-600 hover:underline",children:t("navigation.terms")})," *"]})]}),h.agreeTerms&&e.jsx("p",{className:"text-sm text-red-600",children:h.agreeTerms.message}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("input",{type:"checkbox",...D("agreeMarketing"),className:"mt-1 h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),e.jsx("label",{className:"text-sm text-gray-700",children:t("booking.agreeMarketing")})]})]})]}),s===3&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx(ve,{className:"h-6 w-6 text-primary-600"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t("booking.securePayment")})]}),e.jsx(Te,{onSelect:C,selectedMethod:m}),m==="card"&&e.jsx(fe,{children:_?e.jsx(De,{clientSecret:_,amount:N,onSuccess:re,onError:ne}):e.jsxs("div",{className:"flex justify-center items-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),e.jsx("span",{className:"ml-3 text-gray-600",children:t("payment.initializing","Initializing payment...")})]})}),m==="deposit"&&e.jsx("div",{className:"bg-yellow-50 p-6 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Z,{className:"h-6 w-6 text-yellow-600 flex-shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-yellow-900 mb-2",children:t("payment.depositInfo","Deposit Payment")}),e.jsx("p",{className:"text-yellow-800 text-sm",children:t("payment.depositDesc","You will pay a deposit of {{amount}} now and the remaining {{remaining}} on the day of your experience.",{amount:`€${y}`,remaining:`€${N-y}`})}),e.jsx("button",{type:"button",onClick:()=>g(!0),className:"mt-4 bg-yellow-600 text-white px-4 py-2 rounded-lg hover:bg-yellow-700 transition-colors duration-300",children:t("payment.confirmDeposit","Confirm Deposit Payment")})]})]})}),m==="wallet"&&e.jsx("div",{className:"bg-blue-50 p-6 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Wallet,{className:"h-6 w-6 text-blue-600 flex-shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:t("payment.walletInfo","Digital Wallet")}),e.jsx("p",{className:"text-blue-800 text-sm",children:t("payment.walletDesc","Digital wallet payment will be available soon. Please select another payment method.")})]})]})}),e.jsx("div",{className:"bg-green-50 p-6 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(j,{className:"h-6 w-6 text-green-600 flex-shrink-0 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-green-900 mb-2",children:t("booking.whatHappensAfter")}),e.jsxs("ul",{className:"text-green-800 text-sm space-y-1",children:[e.jsxs("li",{children:["• ",t("booking.instantConfirmation")]}),e.jsxs("li",{children:["• ",t("booking.meetingPoint")]}),e.jsxs("li",{children:["• ",t("booking.weatherUpdates")]}),e.jsxs("li",{children:["• ",t("booking.photosDelivered")]}),e.jsx("li",{className:"font-semibold",children:"• Access to your personal client portal"})]})]})]})})]}),e.jsxs("div",{className:"flex justify-between mt-8 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:ae,className:`px-6 py-3 rounded-lg font-semibold transition-colors duration-300 ${s===1?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,disabled:s===1,children:t("common.previous")}),s<3?e.jsx("button",{type:"button",onClick:se,disabled:!E(),className:`px-8 py-3 rounded-lg font-semibold transition-all duration-300 ${E()?"bg-primary-600 text-white hover:bg-primary-700 hover:scale-105":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:t("common.next")}):e.jsx("button",{type:"submit",disabled:u||s===3&&!E(),className:"bg-green-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-green-700 transition-all duration-300 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:u?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),e.jsx("span",{children:t("booking.processing")})]}):e.jsx("span",{children:t("booking.completeBooking")})})]})]})}),e.jsxs("div",{className:"lg:col-span-1",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 sticky top-32",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:t("booking.bookingSummary")}),e.jsxs("div",{className:"space-y-4 mb-6",children:[r&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:t("booking.date")}),e.jsx("span",{className:"font-semibold",children:new Date(r).toLocaleDateString()})]}),n&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:t("booking.time")}),e.jsx("span",{className:"font-semibold",children:n})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-gray-600",children:[t("booking.participants"),":"]}),e.jsx("span",{className:"font-semibold",children:i})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-gray-600",children:[t("booking.pricePerPerson"),":"]}),e.jsx("span",{className:"font-semibold",children:"€199"})]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center text-lg font-bold",children:[e.jsxs("span",{children:[t("booking.total"),":"]}),e.jsxs("span",{className:"text-primary-600",children:["€",m==="deposit"?y:N]})]}),m==="deposit"&&e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:t("booking.deposit",{deposit:y,remaining:N-y})})]}),e.jsxs("div",{className:"space-y-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(j,{className:"h-4 w-4 text-green-500 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:t("features.professionalSkipper.title")})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(j,{className:"h-4 w-4 text-green-500 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:t("booking.safetyEquipment")})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(j,{className:"h-4 w-4 text-green-500 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:t("booking.medalCertificate")})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(j,{className:"h-4 w-4 text-green-500 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:t("features.photosIncluded.title")})]})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600 mb-4",children:[e.jsx(ce,{className:"h-4 w-4"}),e.jsx("span",{children:t("booking.freeCancellation")})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(de,{className:"h-4 w-4"}),e.jsx("span",{children:t("features.fullyInsured.title")})]})]})]}),e.jsxs("div",{className:"bg-primary-50 rounded-2xl p-6 mt-6",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:t("booking.needHelp")}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("a",{href:"tel:+393456789012",className:"flex items-center space-x-3 text-primary-600 hover:text-primary-700 transition-colors duration-300",children:[e.jsx(me,{className:"h-4 w-4"}),e.jsx("span",{children:"+39 345 678 9012"})]}),e.jsxs("a",{href:"mailto:info@gardaracing.com",className:"flex items-center space-x-3 text-primary-600 hover:text-primary-700 transition-colors duration-300",children:[e.jsx(pe,{className:"h-4 w-4"}),e.jsx("span",{children:"info@gardaracing.com"})]})]})]})]})]})})]})]})};export{Ye as default};
