import{u as y,j as e,B as u,g,r as m,C as w}from"./index-CAm8ThRU.js";import{S as v}from"./SEOHead-D0m3rQ6u.js";import"./stripe.esm-DvvTbaBv.js";import{C as f}from"./calendar-CEuwKNwK.js";import{C as N}from"./check-circle-rt7PIa3k.js";import{C as j}from"./credit-card-FGMs7f0t.js";const C=({status:s,currentPeriodEnd:t,paymentMethod:a,price:i,onManage:l,onCancel:o})=>{const{t:r}=y(),x=n=>n?new Date(n*1e3).toLocaleDateString():"",d=(n,c)=>new Intl.NumberFormat("en-US",{style:"currency",currency:c.toUpperCase()}).format(n),p=()=>{switch(s){case"active":case"trialing":return"bg-green-100 text-green-800";case"past_due":case"incomplete":return"bg-yellow-100 text-yellow-800";case"canceled":case"unpaid":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},b=()=>{switch(s){case"active":case"trialing":return e.jsx(N,{className:"h-5 w-5 text-green-500"});case"past_due":case"incomplete":return e.jsx(g,{className:"h-5 w-5 text-yellow-500"});case"canceled":case"unpaid":return e.jsx(g,{className:"h-5 w-5 text-red-500"});default:return null}};return e.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:[e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:r("subscription.title","Your Subscription")}),i&&e.jsxs("p",{className:"text-gray-600",children:[d(i.amount,i.currency),"/",i.interval]})]}),e.jsxs("div",{className:`px-3 py-1 rounded-full text-sm font-medium flex items-center ${p()}`,children:[b(),e.jsx("span",{className:"ml-1 capitalize",children:s})]})]}),e.jsxs("div",{className:"space-y-4",children:[t&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(f,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:s==="canceled"?r("subscription.endsOn","Ends on {{date}}",{date:x(t)}):r("subscription.renewsOn","Renews on {{date}}",{date:x(t)})})]}),a&&a.brand&&a.last4&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(CreditCard,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:r("subscription.paymentMethod","Payment method: {{brand}} •••• {{last4}}",{brand:a.brand.charAt(0).toUpperCase()+a.brand.slice(1),last4:a.last4})})]})]})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-between",children:[l&&e.jsx(u,{variant:"secondary",size:"sm",onClick:l,children:r("subscription.manage","Manage Subscription")}),o&&s!=="canceled"&&e.jsx(u,{variant:"ghost",size:"sm",onClick:o,children:r("subscription.cancel","Cancel")})]})]})},R=()=>{const{t:s}=y(),[t,a]=m.useState(null),[i,l]=m.useState(!0),[o,r]=m.useState(null),[x,d]=m.useState(!1);m.useEffect(()=>{(async()=>{try{l(!0);const h={subscription_id:"sub_1234567890",subscription_status:"active",price_id:"price_1234567890",current_period_start:Math.floor(Date.now()/1e3)-86400*15,current_period_end:Math.floor(Date.now()/1e3)+86400*15,cancel_at_period_end:!1,payment_method_brand:"visa",payment_method_last4:"4242"};a(h)}catch(h){r(s("subscription.fetchError","Failed to load subscription details")),console.error(h)}finally{l(!1)}})()},[s]);const p=async()=>{try{alert(s("subscription.manageDemo","In a real application, this would redirect to the Stripe Customer Portal"))}catch(c){r(s("subscription.portalError","Failed to open customer portal")),console.error(c)}},b=async()=>{d(!0)},n=async()=>{try{t&&a({...t,cancel_at_period_end:!0}),d(!1)}catch(c){r(s("subscription.cancelError","Failed to cancel subscription")),console.error(c)}};return e.jsxs("div",{className:"pt-20 min-h-screen bg-gray-50",children:[e.jsx(v,{title:s("subscription.title","Your Subscription"),description:s("subscription.description","Manage your subscription to Garda Racing Yacht Club"),url:"/account/subscriptions"}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:s("subscription.title","Your Subscription")}),e.jsx("p",{className:"text-gray-600",children:s("subscription.description","Manage your subscription to Garda Racing Yacht Club")})]}),o&&e.jsx("div",{className:"mb-6 bg-red-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(g,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-red-800",children:o})]})}),i?e.jsx("div",{className:"bg-white rounded-xl shadow-md p-6",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded w-3/4"})]})}):t?e.jsxs(e.Fragment,{children:[e.jsx(C,{status:t.subscription_status,currentPeriodEnd:t.current_period_end,paymentMethod:{brand:t.payment_method_brand,last4:t.payment_method_last4},price:{amount:199,currency:"eur",interval:"month"},onManage:p,onCancel:b}),x&&e.jsxs("div",{className:"mt-6 bg-red-50 p-6 rounded-xl",children:[e.jsx("h3",{className:"text-lg font-semibold text-red-900 mb-3",children:s("subscription.confirmCancel","Confirm Cancellation")}),e.jsx("p",{className:"text-red-800 mb-4",children:s("subscription.cancelWarning","Are you sure you want to cancel your subscription? You will lose access to premium features at the end of your current billing period.")}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(u,{variant:"primary",size:"md",onClick:()=>d(!1),children:s("subscription.keepSubscription","Keep Subscription")}),e.jsx(u,{variant:"ghost",size:"md",onClick:n,children:s("subscription.confirmCancelButton","Yes, Cancel")})]})]}),t.cancel_at_period_end&&e.jsx("div",{className:"mt-6 bg-yellow-50 p-6 rounded-xl",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(f,{className:"h-6 w-6 text-yellow-600 flex-shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-yellow-900 mb-2",children:s("subscription.canceledInfo","Subscription Canceled")}),e.jsx("p",{className:"text-yellow-800",children:s("subscription.accessUntil","Your subscription has been canceled. You will have access until {{date}}.",{date:new Date(t.current_period_end*1e3).toLocaleDateString()})}),e.jsx("button",{onClick:p,className:"mt-4 text-yellow-900 underline hover:text-yellow-700",children:s("subscription.reactivate","Reactivate Subscription")})]})]})})]}):e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-8 text-center",children:[e.jsx(j,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:s("subscription.noActive","No Active Subscription")}),e.jsx("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:s("subscription.noActiveDesc","You don't have an active subscription. Subscribe to get premium features and benefits.")}),e.jsx(u,{variant:"primary",size:"lg",onClick:()=>window.location.href="/pricing",children:s("subscription.viewPlans","View Subscription Plans")})]}),e.jsxs("div",{className:"mt-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:s("subscription.benefits","Subscription Benefits")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm",children:[e.jsx("div",{className:"bg-primary-100 p-3 rounded-full w-12 h-12 flex items-center justify-center mb-4",children:e.jsx(N,{className:"h-6 w-6 text-primary-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:s("subscription.priorityBooking","Priority Booking")}),e.jsx("p",{className:"text-gray-600",children:s("subscription.priorityBookingDesc","Get early access to booking slots before they open to the public")})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm",children:[e.jsx("div",{className:"bg-primary-100 p-3 rounded-full w-12 h-12 flex items-center justify-center mb-4",children:e.jsx(w,{className:"h-6 w-6 text-primary-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:s("subscription.extendedSessions","Extended Sessions")}),e.jsx("p",{className:"text-gray-600",children:s("subscription.extendedSessionsDesc","Enjoy 30 minutes of additional sailing time with each booking")})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm",children:[e.jsx("div",{className:"bg-primary-100 p-3 rounded-full w-12 h-12 flex items-center justify-center mb-4",children:e.jsx(j,{className:"h-6 w-6 text-primary-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:s("subscription.discountedRates","Discounted Rates")}),e.jsx("p",{className:"text-gray-600",children:s("subscription.discountedRatesDesc","Save 15% on all bookings and special events")})]})]})]})]})]})};export{R as default};
